from django.urls import path
from . import views 
from django.contrib.auth.views import LogoutView
from .views import (
    DashboardPageView,
    UserBorrowRequestBatchListView,
    UserSupplyRequestListView,
    UserDamageReportListView,
    UserReservationListView,
    ActivityPageView,
    SupplyListView,
    PropertyListView,
    CheckOutPageView,
    UserProfileListView,
    add_property,
    add_supply,
    edit_property,
    delete_property,
    edit_supply,
    delete_supply,
    borrow_batch_request_detail,
    claim_borrow_batch_items,
    return_borrow_batch_items,
    approve_borrow_item,
    reject_borrow_item,
    claim_individual_borrow_item,
    return_individual_borrow_item,
    create_user,
    request_detail,
    borrow_request_details,
    damage_report_detail,
    reservation_detail,
    mark_notification_as_read_ajax,
    mark_all_notifications_as_read,
    clear_all_notifications,
    logout_view,
    create_supply_request,
    add_to_list,
    remove_from_list,
    update_list_item,
    submit_list_request,
    create_borrow_request,
    approve_borrow_request,
    reject_borrow_request,
    get_supply_history,
    get_property_history,
    CustomLoginView,
    create_department,
    add_property_category,
    modify_property_quantity_generic,
    modify_supply_quantity_generic,
    AdminPasswordChangeView,
    AdminPasswordChangeDoneView,
    add_category,
    add_subcategory,
    batch_request_detail,
    approve_batch_item,
    reject_batch_item,
    claim_batch_items,
    claim_individual_item,
    get_subcategories,
    update_property_category,
    delete_property_category,
    export_supply_to_excel,
    export_property_to_excel,
    # generate_sample_inventory_report,
    get_supply_by_barcode,
    get_property_by_barcode,
    archive_supply,
    unarchive_supply,
    archive_property,
    unarchive_property,
    ArchivedItemsView,
    update_supply_category,
    update_supply_subcategory,
    delete_supply_category,
    delete_supply_subcategory,
)

urlpatterns = [
    path('', CustomLoginView.as_view(), name='login'),
    path('accounts/login/', CustomLoginView.as_view(), name='login'),

    path('logout/', logout_view, name='logout'),

    path('dashboard/', DashboardPageView.as_view(), name='dashboard'),
    path('activity/', ActivityPageView.as_view(), name='activity'),

    path('supplies/', SupplyListView.as_view(), name='supply_list'),
    path('add-supply/', add_supply, name='add_supply'),
    path('edit-supply/', edit_supply, name='edit_supply'),
    path('delete-supply/<int:pk>/', delete_supply, name='delete_supply'),

    path('property/', PropertyListView.as_view(), name='property_list'),
    path('add-property/', add_property, name='add_property'),
    path('edit-property/', edit_property, name='edit_property'),
    path('delete-property/<int:pk>/', delete_property, name='delete_property'),
    path('property/modify_quantity/', views.modify_property_quantity_generic, name='modify_property_quantity_generic'),
    path('add-property-category/', add_property_category, name='add_property_category'),
    path('update_property_category/', update_property_category, name='update_property_category'),
    path('delete_property_category/<int:category_id>/', delete_property_category, name='delete_property_category'),

    path('add-category/', add_category, name='add_category'),
    path('add-subcategory/', add_subcategory, name='add_subcategory'),
    path('get-subcategories/', get_subcategories, name='get_subcategories'),
    path('supply/modify_quantity/', views.modify_supply_quantity_generic, name='modify_supply_quantity_generic'),
    path('update_supply_category/', views.update_supply_category, name='update_supply_category'),
    path('delete_supply_category/<int:category_id>/', delete_supply_category, name='delete_supply_category'),
    path('update_supply_subcategory/', views.update_supply_subcategory, name='update_supply_subcategory'),
    path('delete_supply_subcategory/<int:subcategory_id>/', delete_supply_subcategory, name='delete_supply_subcategory'),

    path('check-out/', CheckOutPageView.as_view(), name='checkout'),

    path('manage-users/', UserProfileListView.as_view(), name='manage_users'),
    path('create-user/', create_user, name='create_user'),
    path('create-department/', views.create_department, name='create_department'),
    path('edit-department/<int:dept_id>/', views.edit_department, name='edit_department'),
    path('delete-department/<int:dept_id>/', views.delete_department, name='delete_department'),

    path('my-borrow-requests/', UserBorrowRequestBatchListView.as_view(), name='user_borrow_requests'),
    path('my-supply-requests/', UserSupplyRequestListView.as_view(), name='user_supply_requests'),
    path('my-damage-reports/', UserDamageReportListView.as_view(), name='user_damage_reports'),
    path('my-reservations/', UserReservationListView.as_view(), name='user_reservations'),

    # Batch borrow request management URLs
    path('borrow-batch-detail/<int:batch_id>/', borrow_batch_request_detail, name='borrow_batch_request_detail'),
    path('claim-borrow-batch/<int:batch_id>/', claim_borrow_batch_items, name='claim_borrow_batch_items'),
    path('return-borrow-batch/<int:batch_id>/', return_borrow_batch_items, name='return_borrow_batch_items'),
    
    # Individual borrow item management URLs
    path('approve-borrow-item/<int:batch_id>/<int:item_id>/', approve_borrow_item, name='approve_borrow_item'),
    path('reject-borrow-item/<int:batch_id>/<int:item_id>/', reject_borrow_item, name='reject_borrow_item'),
    path('claim-borrow-item/<int:batch_id>/<int:item_id>/', claim_individual_borrow_item, name='claim_individual_borrow_item'),
    path('return-borrow-item/<int:batch_id>/<int:item_id>/', return_individual_borrow_item, name='return_individual_borrow_item'),

    path('create-supply-request/', create_supply_request, name='create_supply_request'),
    path('add-to-list/', add_to_list, name='add_to_list'),
    path('remove-from-list/', remove_from_list, name='remove_from_list'),
    path('update-list-item/', update_list_item, name='update_list_item'),
    path('submit-list-request/', submit_list_request, name='submit_list_request'),
    path('create-borrow-request/', create_borrow_request, name='create_borrow_request'),
    path('approve-borrow-request/<int:request_id>/', approve_borrow_request, name='approve_borrow_request'),
    path('reject-borrow-request/<int:request_id>/', reject_borrow_request, name='reject_borrow_request'),

    path('request/<int:pk>/', request_detail, name='request_detail'),
    path('borrow-request/<int:pk>/', borrow_request_details, name='borrow_request_details'),
    path('damage-report/<int:pk>/', damage_report_detail, name='damage_report_detail'),
    path('reservation/<int:pk>/', reservation_detail, name='reservation_detail'),

    path('mark-notification-read/', mark_notification_as_read_ajax, name='mark_notification_read'),
    path('mark-all-notifications-read/', mark_all_notifications_as_read, name='mark_all_notifications_read'),
    path('clear-all-notifications/', clear_all_notifications, name='clear_all_notifications'),

    path('api/supply/<int:supply_id>/history/', get_supply_history, name='supply_history'),
    path('api/property/<int:property_id>/history/', get_property_history, name='property_history'),

    path('get_supply_history/<int:supply_id>/', get_supply_history, name='get_supply_history'),
    path('get_property_history/<int:property_id>/', get_property_history, name='get_property_history'),
    path('change-password/', 
         AdminPasswordChangeView.as_view(), 
         name='password_change'),
    path('change-password/done/', 
         AdminPasswordChangeDoneView.as_view(), 
         name='password_change_done'),

    path('get_supply_by_barcode/<str:barcode>/', get_supply_by_barcode, name='get_supply_by_barcode'),
    path('get_property_by_barcode/<str:barcode>/', get_property_by_barcode, name='get_property_by_barcode'),
    path('export-supply/', export_supply_to_excel, name='export_supply'),
    path('export-property/', export_property_to_excel, name='export_property'),
    # path('sample-inventory-template/', generate_sample_inventory_report, name='sample_inventory_template'),

    path('supply/<int:pk>/archive/', archive_supply, name='archive_supply'),
    path('supply/<int:pk>/unarchive/', unarchive_supply, name='unarchive_supply'),
    path('property/<int:pk>/archive/', archive_property, name='archive_property'),
    path('property/<int:pk>/unarchive/', unarchive_property, name='unarchive_property'),
    path('archived-items/', ArchivedItemsView.as_view(), name='archived_items'),
    
    # Batch request management URLs
    path('batch-request/<int:batch_id>/', batch_request_detail, name='batch_request_detail'),
    path('batch-request/<int:batch_id>/item/<int:item_id>/approve/', approve_batch_item, name='approve_batch_item'),
    path('batch-request/<int:batch_id>/item/<int:item_id>/reject/', reject_batch_item, name='reject_batch_item'),
    
    # Claiming workflow URLs
    path('batch-request/<int:batch_id>/claim/', claim_batch_items, name='claim_batch_items'),
    path('batch-request/<int:batch_id>/item/<int:item_id>/claim/', claim_individual_item, name='claim_individual_item'),
]
