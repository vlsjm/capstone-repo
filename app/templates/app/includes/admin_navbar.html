 <!-- Modern Sidebar Navigation - Admin -->
<nav class="modern-sidebar" data-modern-sidebar role="navigation" aria-label="Main navigation" style="background-color: #152d64;">
  
  <!-- SIDEBAR HEADER -->
  <div class="sidebar-header">
    <h1>Resource Hive</h1>
  </div>

  <!-- SIDEBAR CONTENT -->
  <div class="sidebar-content">
    
    <!-- MAIN MENU SECTION -->
    <section class="sidebar-section">
      <div class="sidebar-section-title">
        <i class="fas fa-home sidebar-section-title-icon"></i>
        Main Menu
      </div>
      <ul class="sidebar-menu">
        <li class="sidebar-menu-item">
          <a href="{% url 'dashboard' %}" class="sidebar-menu-link" {% if request.resolver_match.url_name == 'dashboard' %}style="color: #fbff00 !important;"{% endif %}>
            <i class="fas fa-chart-line"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="sidebar-menu-item">
          <a href="{% url 'property_list' %}" class="sidebar-menu-link" {% if request.resolver_match.url_name == 'property_list' %}style="color: #fbff00 !important;"{% endif %}>
            <i class="fas fa-building"></i>
            <span>Property</span>
          </a>
        </li>
        <li class="sidebar-menu-item">
          <a href="{% url 'supply_list' %}" class="sidebar-menu-link" {% if request.resolver_match.url_name == 'supply_list' %}style="color: #fbff00 !important;"{% endif %}>
            <i class="fas fa-boxes"></i>
            <span>Supply</span>
          </a>
        </li>
        <li class="sidebar-menu-item">
          <a href="{% url 'activity' %}" class="sidebar-menu-link" {% if request.resolver_match.url_name == 'activity' %}style="color: #fbff00 !important;"{% endif %}>
            <i class="fas fa-list"></i>
            <span>Activity Log</span>
          </a>
        </li>
      </ul>
    </section>

    <!-- REQUESTS SECTION (COLLAPSIBLE) -->
    <section class="sidebar-section">
      <button class="sidebar-group-toggle" type="button" aria-expanded="false">
        <span style="display: flex; align-items: center; gap: 12px; flex: 1;">
          <i class="fas fa-inbox sidebar-group-toggle-icon"></i>
          <span>Requests</span>
        </span>
        <i class="fas fa-chevron-down sidebar-group-toggle-chevron"></i>
      </button>
      <ul class="sidebar-group-submenu sidebar-menu">
        <li class="sidebar-menu-item">
          <a href="{% url 'user_supply_requests' %}" class="sidebar-menu-link" {% if request.resolver_match.url_name == 'user_supply_requests' %}style="color: #fbff00 !important;"{% endif %}>
            <i class="fas fa-box"></i>
            <span>Supply Requests</span>
          </a>
        </li>
        <li class="sidebar-menu-item">
          <a href="{% url 'user_borrow_requests' %}" class="sidebar-menu-link" {% if request.resolver_match.url_name == 'user_borrow_requests' %}style="color: #fbff00 !important;"{% endif %}>
            <i class="fas fa-undo-alt"></i>
            <span>Borrow Requests</span>
          </a>
        </li>
      </ul>
    </section>

    <!-- REPORTS SECTION (COLLAPSIBLE) -->
    <section class="sidebar-section">
      <button class="sidebar-group-toggle" type="button" aria-expanded="false">
        <span style="display: flex; align-items: center; gap: 12px; flex: 1;">
          <i class="fas fa-file-alt sidebar-group-toggle-icon"></i>
          <span>Reports</span>
        </span>
        <i class="fas fa-chevron-down sidebar-group-toggle-chevron"></i>
      </button>
      <ul class="sidebar-group-submenu sidebar-menu">
        <li class="sidebar-menu-item">
          <a href="{% url 'user_damage_reports' %}" class="sidebar-menu-link" {% if request.resolver_match.url_name == 'user_damage_reports' %}style="color: #fbff00 !important;"{% endif %}>
            <i class="fas fa-exclamation-circle"></i>
            <span>Damage Reports</span>
          </a>
        </li>
        <li class="sidebar-menu-item">
          <a href="{% url 'damaged_items_management' %}" class="sidebar-menu-link" {% if request.resolver_match.url_name == 'damaged_items_management' %}style="color: #fbff00 !important;"{% endif %}>
            <i class="fas fa-tools"></i>
            <span>Manage Damaged Items</span>
          </a>
        </li>
      </ul>
    </section>

    <!-- MANAGEMENT SECTION -->
    <section class="sidebar-section">
      <div class="sidebar-section-title">
        <i class="fas fa-cog sidebar-section-title-icon"></i>
        Management
      </div>
      <ul class="sidebar-menu">
        <li class="sidebar-menu-item">
          <a href="{% url 'user_reservations' %}" class="sidebar-menu-link" {% if request.resolver_match.url_name == 'user_reservations' %}style="color: #fbff00 !important;"{% endif %}>
            <i class="fas fa-calendar-check"></i>
            <span>Reservations</span>
          </a>
        </li>
        <li class="sidebar-menu-item">
          <a href="{% url 'manage_users' %}" class="sidebar-menu-link" {% if request.resolver_match.url_name == 'manage_users' %}style="color: #fbff00 !important;"{% endif %}>
            <i class="fas fa-users-cog"></i>
            <span>Manage Users</span>
          </a>
        </li>
      </ul>
    </section>

    <!-- ARCHIVED ITEMS SECTION -->
    <section class="sidebar-section">
      <div class="sidebar-section-title">
        <i class="fas fa-archive sidebar-section-title-icon"></i>
        Archived
      </div>
      <ul class="sidebar-menu">
        <li class="sidebar-menu-item">
          <a href="{% url 'archived_items' %}" class="sidebar-menu-link" {% if request.resolver_match.url_name == 'archived_items' %}style="color: #fbff00 !important;"{% endif %}>
            <i class="fas fa-archive"></i>
            <span>Archived Items</span>
          </a>
        </li>
      </ul>
    </section>

  </div>

  <!-- SIDEBAR FOOTER -->
  <div class="sidebar-footer">

    <!-- User Profile Section -->
    <div class="sidebar-footer-section">
      <a href="{% url 'admin_profile' %}" class="sidebar-user-profile" title="View Profile" {% if request.resolver_match.url_name == 'admin_profile' %}style="color: #fbff00 !important;"{% endif %}>
        <div class="sidebar-user-avatar">
          <i class="fas fa-user"></i>
        </div>
        <div class="sidebar-user-info">
          <span class="sidebar-user-name">{{ user.get_full_name|default:user.username }}</span>
          <span class="sidebar-user-email">{{ user.email }}</span>
        </div>
      </a>
    </div>

    <!-- Logout -->
    <div class="sidebar-footer-section">
      <ul class="sidebar-footer-menu">
        <li>
          <a href="{% url 'logout' %}" class="sidebar-footer-link sidebar-logout-link" title="Logout">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
          </a>
        </li>
      </ul>
    </div>

  </div>

</nav>

<!-- Mobile Menu Toggle Button -->
<button id="sidebar-menu-toggle" class="mobile-sidebar-toggle" aria-label="Toggle navigation menu" style="display: none;">
  <i class="fas fa-bars"></i>
</button>

<!-- Close Button for Mobile (inside sidebar header) -->
<style>
  @media (max-width: 768px) {
    #sidebar-menu-toggle {
      display: block;
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1001;
      background: linear-gradient(135deg, #152d64 0%, #0f1f42 100%);
      color: #fbff00;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 20px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    #sidebar-menu-toggle:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(21, 45, 100, 0.3);
    }

    .modern-sidebar .sidebar-close-btn {
      display: block;
    }
  }

  @media (min-width: 769px) {
    .modern-sidebar .sidebar-close-btn {
      display: none;
    }
  }
</style>

<!-- Script to add close button to sidebar header on mobile -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const sidebarHeader = document.querySelector('.sidebar-header');
    if (sidebarHeader && !document.querySelector('.sidebar-close-btn')) {
      const closeBtn = document.createElement('button');
      closeBtn.className = 'sidebar-close-btn';
      closeBtn.setAttribute('aria-label', 'Close navigation');
      closeBtn.innerHTML = '<i class="fas fa-times"></i>';
      sidebarHeader.appendChild(closeBtn);
    }
  });
</script>
