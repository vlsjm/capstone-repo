{% extends 'app/base.html' %}
{% load static %}

{% block title %}Password Changed{% endblock %}

{% block content %}
{% include 'app/navbar.html' %}
<div class="content">
    <!-- Display messages if any -->
    {% if messages %}
        <div class="messages-container">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}" id="successAlert">
                    <i class="fas fa-{% if message.tags == 'success' %}check-circle{% elif message.tags == 'error' %}exclamation-circle{% elif message.tags == 'warning' %}exclamation-triangle{% else %}info-circle{% endif %}"></i>
                    <span>{{ message }} Redirecting to dashboard in <span id="countdown">4</span> seconds...</span>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="password-change-success">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2>Password Changed Successfully</h2>
            <p>Your password has been updated. You can now use your new password to log in.</p>
            <div class="actions">
                <a href="{% url 'dashboard' %}" class="btn-return">Return to Dashboard</a>
            </div>
        </div>
    {% endif %}
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // If messages are displayed, wait a moment before redirecting
        let countdown = 4; // 4 seconds to give time to read the message
        
        const countdownElement = document.getElementById('countdown');
        
        const timer = setInterval(function() {
            countdown--;
            if (countdownElement) {
                countdownElement.textContent = countdown;
            }
            
            if (countdown <= 0) {
                clearInterval(timer);
                window.location.href = '{% url "dashboard" %}';
            }
        }, 1000);
    });
</script>

<style>
.content {
    padding: 2rem;
    background-color: #f5f5f5;
    min-height: calc(100vh - 60px);
    margin-left: 250px; /* Add space for navbar */
}

.messages-container {
    margin-bottom: 2rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
}

.alert {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    border-radius: 4px;
    font-weight: 500;
}

.alert i {
    font-size: 1.25rem;
}

.alert-success {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.alert-success i {
    color: #28a745;
}

.password-change-success {
    max-width: 600px;
    margin: 2rem auto;
    background: white;
    padding: 3rem 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    text-align: center;
}

.success-icon {
    margin-bottom: 1.5rem;
}

.success-icon i {
    font-size: 4rem;
    color: #4caf50;
}

.password-change-success h2 {
    color: #333;
    margin-bottom: 1rem;
    font-size: 1.75rem;
}

.password-change-success p {
    color: #666;
    font-size: 1.1rem;
    margin-bottom: 2rem;
}

.actions {
    margin-top: 2rem;
}

.btn-return {
    background-color: #1976d2;
    color: white;
    padding: 0.75rem 2rem;
    border-radius: 4px;
    text-decoration: none;
    font-weight: 500;
    transition: background-color 0.2s;
    display: inline-block;
}

.btn-return:hover {
    background-color: #1565c0;
}
</style>
{% endblock %} 