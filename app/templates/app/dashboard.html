{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  </head>
  <body>
    {% block content %} {% include 'app/navbar.html' %}
    <div class="parent">
      <div class="div1">
        <h2>Hello, <span>{{ request.user.username }}</span></h2>
      </div>
      <div class="content">
        <!-- Main Dashboard Content Section -->
        <div class="div2">
          <div class="dashboard-content">
            <!-- Summary Cards Grid -->
            <div class="dashboard-summary">
              <div class="summary-card">
                <div class="card-icon"><i class="fas fa-box"></i></div>
                <div class="card-data">
                  <h3>{{ supply_count }}</h3>
                  <p>Total Supplies</p>
                </div>
              </div>
              <div class="summary-card">
                <div class="card-icon"><i class="fas fa-laptop"></i></div>
                <div class="card-data">
                  <h3>{{ property_count }}</h3>
                  <p>Total Properties</p>
                </div>
              </div>
              <div class="summary-card">
                <div class="card-icon"><i class="fas fa-file-alt"></i></div>
                <div class="card-data">
                  <h3>{{ pending_requests }}</h3>
                  <p>Pending Requests</p>
                </div>
              </div>
              <div class="summary-card">
                <div class="card-icon">
                  <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="card-data">
                  <h3>{{ damage_reports }}</h3>
                  <p>Damage Reports</p>
                </div>
              </div>
            </div>

            <!-- Charts Grid -->
            <div class="dashboard-charts">
              <div class="chart-container">
                <h3>Supply Status</h3>
                <canvas id="supplyStatusChart"></canvas>
              </div>
              <div class="chart-container">
                <h3>Property Condition</h3>
                <canvas id="propertyConditionChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Pass data as JSON -->
    <script id="supplyData" type="application/json">
      {% autoescape off %} [{{ supply_available|default:"0" }}, {{ supply_low_stock|default:"0" }}, {{ supply_out_of_stock|default:"0" }}] {% endautoescape %}
    </script>

    <script id="propertyData" type="application/json">
      {% autoescape off %} [{{ property_new|default:"0" }}, {{ property_good|default:"0" }}, {{ property_needs_repair|default:"0" }}, {{ property_damaged|default:"0" }}] {% endautoescape %}
    </script>

    <script src="{% static 'scripts/charts.js' %}"></script>
    {% endblock content %}
  </body>
</html>
